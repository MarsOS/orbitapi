
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Orbit Protocol Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#base-endpoint" class="toc-h2 toc-link" data-title="Introduction">Base Endpoint</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#server-information" class="toc-h1 toc-link" data-title="Server Information">Server Information</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#geo-information" class="toc-h2 toc-link" data-title="Server Information">Geo Information</a>
                  </li>
                  <li>
                    <a href="#server-statistics" class="toc-h2 toc-link" data-title="Server Information">Server Statistics</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#package-search" class="toc-h1 toc-link" data-title="Package Search">Package Search</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#url-paramters" class="toc-h2 toc-link" data-title="Package Search">URL Paramters</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#metadata" class="toc-h1 toc-link" data-title="Metadata">Metadata</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#required-parameters" class="toc-h2 toc-link" data-title="Metadata">Required Parameters</a>
                  </li>
                  <li>
                    <a href="#available-arches" class="toc-h2 toc-link" data-title="Metadata">Available Arches</a>
                  </li>
                  <li>
                    <a href="#available-versions" class="toc-h2 toc-link" data-title="Metadata">Available Versions</a>
                  </li>
                  <li>
                    <a href="#package-size" class="toc-h2 toc-link" data-title="Metadata">Package Size</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#package-download" class="toc-h1 toc-link" data-title="Package Download">Package Download</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#download-a-package" class="toc-h2 toc-link" data-title="Package Download">Download a Package</a>
                  </li>
                  <li>
                    <a href="#download-a-blueprint" class="toc-h2 toc-link" data-title="Package Download">Download a blueprint</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/MarsOS'>Package Manager Protocol for MarsOS</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>should respond. It exists, so that you do not have to use our server to host
This document specifies the way a package repository for our package manager
packages because you can create your own compatible servers.</p>

<p>It is important to know, that the server <strong>MUST</strong> respond exactly as required.
The only possible exception is when you want to add additional fields to the
response. But you need to be carefull, future specifications of this protocol
might use this name, so we suggest prefixing your fields with a more or less
unique vendor prefix.</p>

<p>All API responses will be encoded in <a href="json.org">JSON</a></p>

<p>Current version of the Specification: <strong>1</strong></p>
<h3 id='base-endpoint'>Base Endpoint</h3>
<p><code>GET http://example.com/orbitapi/</code></p>

<p>where <code>http://example.com</code> will be replaced with your url as specified by
the client.</p>
<h1 id='server-information'>Server Information</h1><pre class="highlight shell tab-shell"><code>curl -X GET <span class="s2">"http://example.com/orbitapi/info"</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name-of-your-server"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"webmaster@your-server.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"canSearch"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"canMeta"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"specVersion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Please note, that the name field should only contain letters, digits and dashes</p>
</blockquote>

<p><code>GET /orbitapi/info</code></p>

<p>Returns a ServerSpec object as shown. This will be used to ensure
compatability between server and client.
So a client should make sure that the server is using the right protocol.</p>
<h2 id='geo-information'>Geo Information</h2><pre class="highlight shell tab-shell"><code>curl -X GET <span class="s2">"http://example.com/orbitapi/info/geo"</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York City"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"zip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10004"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>This is the only response, where only the <code>country</code> field is required, the others
need to exist, but can be empty as they are only used to give information to a
user, but will not be used by any form of algorithm.</p>

<p>The country field is encoded in the three letter <a href="https://en.wikipedia.org/wiki/ISO_3166-1">ISO 3166 (ALPHA-3)</a> standard.</p>
</blockquote>

<p><code>GET /orbitapi/info/geo</code></p>

<p>Returns a GeoInfo object which will contain information about the servers location,
this is usefull to find servers closer to the user, which should normaly improve
connection speed and should help to spread the load on the servers.</p>
<h2 id='server-statistics'>Server Statistics</h2><pre class="highlight shell tab-shell"><code>curl -X GET <span class="s2">"http://example.com/orbitapi/info/stats"</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"uniquePackages"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
  </span><span class="s2">"uptime"</span><span class="p">:</span><span class="w"> </span><span class="mi">86400</span><span class="p">,</span><span class="w">
  </span><span class="s2">"availableArches"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"x86_64"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"i386"</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"arches"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"x86_64"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"packages"</span><span class="p">:</span><span class="w"> </span><span class="mi">84</span><span class="p">,</span><span class="w">
      </span><span class="s2">"uniquePackages"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"i386"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"packages"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="p">,</span><span class="w">
      </span><span class="s2">"uniquePackages"</span><span class="p">:</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>uptime in seconds, all arches in <code>availableArches</code> <strong>MUST</strong> have an entry in the
<code>arches</code> object.</p>
</blockquote>

<p><code>GET /orbitapi/info/stats</code></p>

<p>Returns a ServerStats object. It will contain some basic status information about
your server, including the number of packages or the supported hardware platforms.</p>

<aside class="notice">
A Server will contain multiple versions of a package and maybe even host the same
version for multiple architectures.
So if a package is hosted in five different variants, that this should count as
one unique and five total packages.
</aside>
<h1 id='package-search'>Package Search</h1><pre class="highlight shell tab-shell"><code>curl -X GET <span class="s2">"http://example.com/orbitapi/search?name=example&amp;author=john"</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"regex"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"spec"</span><span class="p">:</span><span class="w"> </span><span class="s2">" "</span><span class="p">,</span><span class="w">
    </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">" "</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"example-package"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"libexample"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"other-by-doe"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>The results array should contain every matching package name exactly one time</p>
</blockquote>

<p><code>GET /orbitapi/search</code></p>

<p>Returns the parameters of the search as well as an array of matching package
names.</p>

<aside class="warning">
If a package exists in different variants, it will still only be included once,
so make sure to check the package meta data for a match if you need more
information about it.
</aside>
<h3 id='url-paramters'>URL Paramters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>regex</td>
<td><code>true</code></td>
<td>if true, all other parameters will be used as regex</td>
</tr>
<tr>
<td>name</td>
<td><code></code></td>
<td>package name</td>
</tr>
<tr>
<td>author</td>
<td><code></code></td>
<td>author/Packager name</td>
</tr>
<tr>
<td>version</td>
<td><code></code></td>
<td>package version</td>
</tr>
<tr>
<td>arch</td>
<td><code></code></td>
<td>package architecture</td>
</tr>
</tbody></table>
<h1 id='metadata'>Metadata</h1><pre class="highlight shell tab-shell"><code>curl -X GET <span class="s2">"http://example.com/orbitapi/meta?package=example-package"</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"package"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example-package"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"arches"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"x86_64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"i386"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"versions"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"x86_64"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1.0.2"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"i386"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1.0.2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1.0.2-1"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><code>GET /orbitapi/meta</code></p>

<p>Returns meta information about a package. Use this to check if a version you need
is available.</p>

<aside class="notice">
Please note, that the Metadata query can be splitted to only contain curtain parts
of the PackageMeta object to save bandwith and/or parsing time.
</aside>

<aside class="warning">
To save a lot of work for the server, the package size information is not included
in the root meta query, use the size query to get this for every version.
</aside>
<h3 id='required-parameters'>Required Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>package name you want to query</td>
</tr>
</tbody></table>
<h2 id='available-arches'>Available Arches</h2><pre class="highlight shell tab-shell"><code>curl -X GET <span class="s2">"http://example.com/orbitapi/meta/arches?package=example-package"</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">[</span><span class="s2">"x86_64"</span><span class="p">,</span><span class="w"> </span><span class="s2">"i386"</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>For the above example of <code>example-package</code></p>
</blockquote>

<p><code>GET /orbitapi/meta/arches</code></p>

<p>Only returns an array of all Available architecture for this package.</p>
<h3 id='required-parameters-2'>Required Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>package name you want to query</td>
</tr>
</tbody></table>
<h2 id='available-versions'>Available Versions</h2><pre class="highlight shell tab-shell"><code>curl -X GET <span class="s2">"http://example.com/orbitapi/meta/versions?package=example-package&amp;arch=i386"</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">[</span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1.0.2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"1.0.2-1"</span><span class="p">]</span><span class="w">
</span></code></pre>
<blockquote>
<p>For the above example of <code>example-package</code> with <code>arch=i386</code></p>
</blockquote>

<p><code>GET /orbitapi/meta/versions</code></p>

<p>Returns an array of versions for this package on a specified architecture.</p>
<h3 id='required-parameters-3'>Required Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>package name you want to query</td>
</tr>
<tr>
<td>arch</td>
<td>requested architecture</td>
</tr>
</tbody></table>
<h2 id='package-size'>Package Size</h2><pre class="highlight shell tab-shell"><code>curl -X GET <span class="s2">"http://example.com/orbitapi/meta/versions?package=example-package&amp;arch=i386&amp;version=1.0.2"</span>
</code></pre><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"downloadSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">640</span><span class="p">,</span><span class="w">
  </span><span class="s2">"rootSize"</span><span class="p">:</span><span class="w"> </span><span class="mi">820</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Units in KB</p>
</blockquote>

<p><code>GET /orbitapi/meta/size</code></p>

<p>Return size information for the specified package. Download size represents the
total size of the package while the root Size represents the size of the files
that will be installed.</p>

<aside class="notice">
The total install size is slightly bigger than rootSize because the client will
create some database entries.
</aside>
<h3 id='required-parameters-4'>Required Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>package name you want to query</td>
</tr>
<tr>
<td>arch</td>
<td>requested architecture</td>
</tr>
<tr>
<td>version</td>
<td>requested version</td>
</tr>
</tbody></table>
<h1 id='package-download'>Package Download</h1>
<p>You can either download the prebuild packages or download the blueprint file which
will act as a &#39;manual&#39; on how to build the package from source.</p>

<p>Please note, that all requests to the childs of the <code>/orbitapi/package/</code> endpoint
will return raw file contents and no <code>JSON</code>.</p>
<h2 id='download-a-package'>Download a Package</h2><pre class="highlight shell tab-shell"><code>curl -X GET <span class="s2">"http://example.com/orbitapi/package/get?package=example-package&amp;arch=i386&amp;version=1.0.2"</span>
</code></pre>
<p><code>GET /orbitapi/package/get</code></p>
<h3 id='required-parameters-5'>Required Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>package name you want to Download</td>
</tr>
<tr>
<td>arch</td>
<td>requested architecture</td>
</tr>
<tr>
<td>version</td>
<td>requested version</td>
</tr>
</tbody></table>
<h2 id='download-a-blueprint'>Download a blueprint</h2><pre class="highlight shell tab-shell"><code>curl -X GET <span class="s2">"http://example.com/orbitapi/package/blueprint?package=example-package"</span>
</code></pre>
<p><code>GET /orbitapi/package/blueprint</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>package name you want the blueprint of</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<aside class="notice">
The protocol does not have any error specification right now, this section will
be added, as soon as we figured out the best way to handle errors.
</aside>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
